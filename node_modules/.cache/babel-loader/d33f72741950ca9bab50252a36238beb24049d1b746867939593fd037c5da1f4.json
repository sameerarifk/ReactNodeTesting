{"ast":null,"code":"import React,{useState,useEffect}from'react';import CartItem from'./cartItem';import sum from'./sum';import'./App.css';import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";function CartView(props){const[cart,setCart]=useState(null);const[error,setError]=useState(null);const taxMultiplier=.1;// Fetch the cart by id\nuseEffect(()=>{fetch(\"/api/carts/\".concat(props.cartId),{method:'GET',// headers: new Headers({\n//   'x-auth': props.session.token\n// }),\ncache:'default'}).then(r=>r.json().then(json=>({ok:r.ok,status:r.status,json}))).then(response=>{if(!response.ok||response.status!==200){throw new Error(response.json.message);}setCart(response.json);}).catch(error=>{setError(error);});// eslint-disable-next-line react-hooks/exhaustive-deps\n},[props.cartId]);if(error){return/*#__PURE__*/_jsxs(\"h1\",{\"data-testid\":\"error_heading_id\",children:[\"Failed to retrieve cart (\",error.message,\")\"]});}else if(!cart){return/*#__PURE__*/_jsx(\"h1\",{children:\"Loading shopping cart...\"});}else{const costs=cart.cartItems.map(a=>a.cost);const itemTotal=sum(...costs);const tax=sum(itemTotal,props.shippingCost)*taxMultiplier;const total=sum(itemTotal,props.shippingCost)+tax;return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{\"data-testid\":\"cart_heading_id\",children:\"Shopping Cart\"}),/*#__PURE__*/_jsx(\"ul\",{style:{listStyleType:'none',padding:0,margin:0},children:cart.cartItems.map((cartItemData,idx)=>/*#__PURE__*/_jsx(\"li\",{children:/*#__PURE__*/_jsx(CartItem,{item:cartItemData})},idx))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{\"data-testid\":\"itemscost_id\",children:[\"Items: $\",(itemTotal/100).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Shipping: $\",(props.shippingCost/100).toFixed(2)]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Tax: $\",(tax/100).toFixed(2)]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Order Total: $\",(total/100).toFixed(2)]})})]})]});}}export default CartView;","map":{"version":3,"names":["React","useState","useEffect","CartItem","sum","jsxs","_jsxs","jsx","_jsx","Fragment","_Fragment","CartView","props","cart","setCart","error","setError","taxMultiplier","fetch","concat","cartId","method","cache","then","r","json","ok","status","response","Error","message","catch","children","costs","cartItems","map","a","cost","itemTotal","tax","shippingCost","total","style","listStyleType","padding","margin","cartItemData","idx","item","toFixed"],"sources":["/home/umair/DevOps_Ass/ReactNodeTesting/src/cartview.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport CartItem from './cartItem'\nimport PropTypes from 'prop-types';\nimport sum from './sum'\nimport './App.css';\n\nfunction CartView(props) {\n  const [cart, setCart] = useState(null);\n  const [error, setError] = useState(null);\n  const taxMultiplier = .1;\n\n  // Fetch the cart by id\n  useEffect(() => {\n    fetch(`/api/carts/${props.cartId}`, {\n      method: 'GET',\n      // headers: new Headers({\n      //   'x-auth': props.session.token\n      // }),\n      cache: 'default'\n    })\n      .then(r => r.json().then(json => ({ ok: r.ok, status: r.status, json })))\n      .then(response => {\n        if (!response.ok || response.status !== 200) {\n          throw new Error(response.json.message);\n        }\n        setCart(response.json);\n      })\n      .catch(error => {\n        setError(error);\n      });\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [props.cartId]);\n\n  if (error) {\n    return (<h1 data-testid=\"error_heading_id\">Failed to retrieve cart ({error.message})</h1>);\n  } else if (!cart) {\n    return (<h1>Loading shopping cart...</h1>);\n  } else {\n    const costs = cart.cartItems.map(a => a.cost);\n    const itemTotal = sum(...costs);\n    const tax = sum(itemTotal, props.shippingCost) * taxMultiplier;\n    const total = sum(itemTotal, props.shippingCost) + tax;\n    return (\n      <>\n        <div>\n          <h1 data-testid=\"cart_heading_id\">Shopping Cart</h1>\n          <ul style={{ listStyleType: 'none', padding: 0, margin: 0 }}>\n            {cart.cartItems.map((cartItemData, idx) =>\n              <li key={idx}>\n                <CartItem item={cartItemData} />\n              </li>\n            )}\n          </ul>\n        </div>\n        <div>\n          <p data-testid=\"itemscost_id\">Items: ${(itemTotal/100).toFixed(2)}</p>\n          <p>Shipping: ${(props.shippingCost/100).toFixed(2)}</p>\n          <p>Tax: ${(tax/100).toFixed(2)}</p>\n          <hr></hr>\n          <p><b>Order Total: ${(total/100).toFixed(2)}</b></p>\n        </div>\n      </>\n    );\n  }\n}\n\nCartView.propTypes = {\n  cartId: PropTypes.number.isRequired,\n  shippingCost: PropTypes.number.isRequired\n};\n\nexport default CartView\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}